<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<title>CSS3 Playground by Mike Plate</title>
<script src="http://ajax.googleapis.com/ajax/libs/dojo/1.5/dojo/dojo.xd.js" type="text/javascript"></script>
<script type="text/javascript" src="zeroclipboard/ZeroClipboard.js"></script>
<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/dojo/1.5/dijit/themes/tundra/tundra.css" />
<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/dojo/1.5/dojox/layout/resources/ResizeHandle.css" />
<meta property="fb:admins" content="621738122" />
<style type="text/css">
html, body {
	width: 100%;
	height: 100%;
	margin: 0px;
}
body, input, textarea, select {
	font-family: Calibri, "Lucida Grande", sans-serif;
	font-size: 12pt;
}
.tundra .dijitMenuItem {
	font-family: Calibri, "Lucida Grande", sans-serif;
	font-size: 12pt;
	border-bottom: solid 1px #DDD;
}
h1 {
	font-size: 12pt;
	font-weight: bold;
	padding-left: 5px;
}
p.desc {
	font-size: 10pt;
	margin-top: 0px;
	margin-bottom: 6px;
	padding-left: 5px;
}
h6 {
	font-size: 9pt;
	font-weight: normal;
	font-style: italic;
	margin-top: 0px;
	margin-bottom: 6px;
	padding-left: 5px;
}
div.body {
	height: 100%;
}
div.toolbox {
	width: 280px;
}
div.text {
	height: 300px;
}
div.canvas {
}
div.toolTitle {
	font-size: 12pt;
	font-weight: bold;
}
div.styleSource {
}
div.fieldTitle {
	clear: left;
	margin-top: 8px;
	border-top: 1px solid #DDD;
}
div.fieldNumber {
	float: left;
}
div.fieldList {
}
div.fieldSlider {
}
.tundra .dijitAccordionContainer-dijitContentPane {
	padding-top: 0px;
}
div#buttonBar {
	position: absolute;
	top: 0px;
	right: 0px;
	padding: 3px;
}
</style>
<script type="text/javascript">
var boxUniqueId = 1;
var allBoxes = new Array();
var styleSource = "";
var runningOpacityAnimation = false;

function Box() {
	var me = this;
	this.BorderRadius = 0;
	this.BorderRadiusSet = "";
	
	this.BoxShadowOffset = 0;
	this.BoxShadowBlur = 0;
	this.BoxShadowColor = "#000000";
	this.BoxShadowSet = "";
	
	this.TextShadowOffset = 0;
	this.TextShadowBlur = 0;
	this.TextShadowColor = "#000000";
	this.TextShadowSet = "";

	this.TransformRotate = "0";
	this.TransformScale = "1.0";
	this.TransformSkew = "0";
	this.TransformSkewY = "0";
	this.TransformSet = "";
	
	this.BorderWidth = 0;
	this.BorderColor = "#000000";
	this.BorderSet = "";
	
	this.BackgroundColor = "#DDDDDD";
	this.BackgroundSet = "";
	
	this.Padding = 0;
	this.PaddingSet = "";
	this.Opacity = "1.0";
	this.OpacitySet = "";
	this.ZIndex = "0";
	this.ZIndexSet = "";

	this.TextSize = 12;
	this.TextFont = "Verdana, Geneva, sans-serif";
	this.TextBold = false;
	this.TextItalic = false;
	this.TextColor = "#888888";
	this.TextAlignment = "Center";
	this.TextSet = "";
	
	this.Content = dojo.byId("contentText").value;
	
	var div = document.createElement("DIV");
	div.id = "current" + boxUniqueId;
	div.innerHTML = this.Content;
	div.style.position = "absolute";
	if (current==null) {
		div.style.left = "100px";
		div.style.top = "100px";
		div.style.width = "300px";
		div.style.height = "150px";
	}
	else {
		div.style.left = (parseInt(current.Element.style.left)+20) + "px";
		div.style.top = (parseInt(current.Element.style.top)+20) + "px";
		div.style.width = current.Element.style.width;
		div.style.height = current.Element.style.height;
	}
	div.style.cursor = "move";
	dojo.query(div).connect("onmousedown", function() {
		if (current != me) {
			current = me;
			SetControls(current);
			Flash(current);
		}
	});
	dojo.byId("content").appendChild(div);
	this.Element = div;
	boxUniqueId++;

	var moveable = new dojo.dnd.Moveable(this.Element);
	moveable.onMoveStop = function(mover, leftTop) {
		OutputSource();
	};
	
	var resize = new dojox.layout.ResizeHandle({
		targetId: this.Element.id
	});
	resize.activeResize = true;
	resize.animateSizing = false;
	resize.placeAt(this.Element.id);
	resize.onResize = function(ev) {
		OutputSource();
	};
	var resizeDiv = div.childNodes[div.childNodes.length-1];
	resizeDiv.style.visibility = "hidden";
	dojo.connect(this.Element, "onmouseover", function() { 
		var resizeDiv = div.childNodes[div.childNodes.length-1];
		resizeDiv.style.visibility = "visible";
	});
	dojo.connect(this.Element, "onmouseout", function() { 
		var resizeDiv = div.childNodes[div.childNodes.length-1];
		resizeDiv.style.visibility = "hidden";
	});
}

var current = null;
var borderRadiusSlider;
var boxShadowOffsetSlider;
var boxShadowBlurSlider;
var boxShadowColorPalette;
var textShadowOffsetSlider;
var textShadowBlurSlider;
var textShadowColorPalette;
var transformRotateSlider;
var transformScaleSlider;
var transformSkewSlider;
var transformSkewYSlider;
var borderWidthSlider;
var borderColorPalette;
var backgroundColorPalette;
var paddingSlider;
var opacitySlider;
var zIndexSlider;
var textSizeSlider;
var textColorPalette;
var fontComboBox;

dojo.require("dojo.parser");
dojo.require("dijit.layout.ContentPane");
dojo.require("dijit.layout.BorderContainer");
dojo.require("dijit.layout.AccordionContainer");
dojo.require("dijit.form.Slider");
dojo.require("dijit.form.ComboBox");
dojo.require("dijit.ColorPalette");
dojo.require("dojo.dnd.move");
dojo.require("dojox.layout.ResizeHandle");

dojo.addOnLoad(function () {
	dojo.parser.parse();
	dojo.animateProperty({ node: "container", properties: { opacity: 1.0 }, duration: 1000 }).play();
	
	if (navigator.mimeTypes && navigator.mimeTypes["application/x-shockwave-flash"]) {
		ZeroClipboard.setMoviePath("zeroclipboard/ZeroClipboard.swf");
		var clip = new ZeroClipboard.Client();
		clip.addEventListener("mouseDown", function(client) { 
		    clip.setText(styleSource);
	    });
		clip.glue("CopyToClipboard");
		dojo.connect(window, "onresize", function() { 
			clip.reposition();
		});
		var clipFlash = dojo.byId("ZeroClipboardMovie_1");
		if (clipFlash) {
			if (clipFlash.parentNode) {
				clipFlash.parentNode.setAttribute("title", dojo.byId("CopyToClipboard").title);
			}
		}
	}
	else {
		dojo.byId("CopyToClipboard").style.display = "none";
	}
	
	borderRadiusSlider = setupSlider("borderRadius", 0, 50, UpdateBorderRadius);
	boxShadowOffsetSlider = setupSlider("boxShadowOffset", -50, 50, UpdateBoxShadow);
	boxShadowBlurSlider = setupSlider("boxShadowBlur", 0, 50, UpdateBoxShadow);
	boxShadowColorPalette = setupColorPalette("boxShadowColor", UpdateBoxShadow);
	textShadowOffsetSlider = setupSlider("textShadowOffset", -50, 50, UpdateTextShadow);
	textShadowBlurSlider = setupSlider("textShadowBlur", 0, 50, UpdateTextShadow);
	textShadowColorPalette = setupColorPalette("textShadowColor", UpdateTextShadow);
	transformRotateSlider = setupSlider("transformRotate", -180, 180, UpdateTransform);
	transformScaleSlider = setupSlider("transformScale", 0, 5, UpdateTransform);
	transformSkewSlider = setupSlider("transformSkew", -80, 80, UpdateTransform);
	transformSkewYSlider = setupSlider("transformSkewY", -80, 80, UpdateTransform);
	borderWidthSlider = setupSlider("borderWidth", 0, 50, UpdateBorder);
	borderColorPalette = setupColorPalette("borderColor", UpdateBorder);
	backgroundColorPalette = setupColorPalette("backgroundColor", UpdateBackground);
	paddingSlider = setupSlider("padding", 0, 50, UpdatePadding);
	opacitySlider = setupSlider("opacity", 0, 1, UpdateOpacity);
	zIndexSlider = setupSlider("zIndex", -10, 10, UpdateZIndex);
	setupText("contentText", UpdateContent);
	textSizeSlider = setupSlider("size", 4, 50, UpdateText);
	textColorPalette = setupColorPalette("color", UpdateText);
	fontComboBox = setupComboBox("fontText", UpdateText);
	setupCheckBox("boldText", UpdateText);
	setupCheckBox("italicText", UpdateText);

	AddBox();
	RefreshButtons();
});

function setupSlider(baseName, minValue, maxValue, updateFunc) {
	var textEl = dojo.byId(baseName + "Text");
	var scale = 1;
	if (textEl.value.indexOf(".") >= 0) {
		var digitCount = textEl.value.length - textEl.value.indexOf(".") - 1;
		while (digitCount > 0) {
			scale *= 10;
			digitCount--;
		}
	}
	var defaultValue = parseInt(textEl.value);

	var slider = new dijit.form.HorizontalSlider({
		name: baseName+"SliderWidget",
		value: defaultValue*scale,
		minimum: minValue*scale,
		maximum: maxValue*scale,
		discreteValues: maxValue*scale-minValue*scale+1,
		intermediateChanges: true,
		style: "margin-top: 3px;",
		onChange: function(value) {
			dojo.byId(baseName + "Text").value = value / scale;
			updateFunc();
		}
	}, baseName + "Slider");
	
	dojo.query("#" + baseName + "Text").connect("onkeyup", function() {
		if (textEl.value.length > 0) {
			var value = null;
			if (scale==1) {
				value = parseInt(textEl.value);
			}
			if (value != null && !isNaN(value)) {
				if (value >= slider.attr("minimum") && value <= slider.attr("maximum"))
					slider.attr("value", value);
				updateFunc();
			} 
		}
	});
	
	return slider;
}

function setupColorPalette(baseName, updateFunc) {
	dojo.query("#" + baseName + "Text").connect("onkeyup", updateFunc);
	return new dijit.ColorPalette({
		palette: "7x10",
		onChange: function(value) {
			dojo.byId(baseName + "Text").value = value.toUpperCase();
			updateFunc();
		}
	}, baseName + "Palette");
}

function setupText(elementName, updateFunc) {
	dojo.query("#" + elementName).connect("onkeyup", updateFunc);
}

function setupComboBox(elementName, updateFunc) {
	return new dijit.form.ComboBox({
		onChange: function() {
			updateFunc();
		},
		onKeyUp: function() {
			updateFunc();
		}
	}, elementName);
}

function setupCheckBox(elementName, updateFunc) {
	dojo.query("#" + elementName).connect("onclick", updateFunc);
}

function OutputSource() {
	OutputBrowserStyle();
	styleSource = "";
	if (current.BorderRadiusSet.length > 0)
		styleSource += current.BorderRadiusSet + ";\r\n";
	if (current.BoxShadowSet.length > 0)
		styleSource += current.BoxShadowSet + ";\r\n";
	if (current.TextShadowSet.length > 0)
		styleSource += current.TextShadowSet + ";\r\n";
	if (current.TransformSet.length > 0)
		styleSource += current.TransformSet + ";\r\n";
	if (current.BorderSet.length > 0)
		styleSource += current.BorderSet + ";\r\n";
	if (current.BackgroundSet.length > 0)
		styleSource += current.BackgroundSet + ";\r\n";
	if (current.PaddingSet.length > 0)
		styleSource += current.PaddingSet + ";\r\n";
	if (current.OpacitySet.length > 0)
		styleSource += current.OpacitySet + ";\r\n";
	if (current.ZIndexSet.length > 0)
		styleSource += current.ZIndexSet + ";\r\n";
	if (current.TextSet.length > 0)
		styleSource += current.TextSet + ";\r\n";
		
	var styleHtml = styleSource;
	styleHtml = styleHtml.replace(/\r\n/g, "<br />");
	dojo.byId("htmlSourceSet").innerHTML = styleHtml;
}

function OutputBrowserStyle() {
	if (!runningOpacityAnimation) {
		var str = current.Element.getAttribute("style");
		if (str.replace)
			str = str.replace(/; */g, ";<br />");
		dojo.byId("htmlSource").innerHTML = str;
	}
}

function UpdateBorderRadius() {
	var set;
	var borderRadius = parseInt(dojo.byId("borderRadiusText").value);
	if (borderRadius!=0) {
		set = borderRadius + "px";
		current.BorderRadiusSet = "-webkit-border-radius: " + set + ";";
		current.BorderRadiusSet += "\r\n-moz-border-radius: " + set + ";";
		current.BorderRadiusSet += "\r\nborder-radius: " + set;
	}
	else {
		set = "";
		current.BorderRadiusSet = "";
	}
	current.BorderRadius = borderRadius;
	current.Element.style.WebkitBorderRadius = set;
	current.Element.style.MozBorderRadius = set;
	current.Element.style.borderRadius = set;
	OutputSource();
}

function SetBorderRadius() {
	dojo.byId("borderRadiusText").value = current.BorderRadius;
	borderRadiusSlider.attr("value", current.BorderRadius);
}

function UpdateBoxShadow() {
	var set;
	var boxShadowOffset = parseInt(dojo.byId("boxShadowOffsetText").value);
	var boxShadowBlur = parseInt(dojo.byId("boxShadowBlurText").value);
	if (boxShadowOffset!=0 || boxShadowBlur!=0) {
		var boxShadowColor = dojo.byId("boxShadowColorText").value;
		set = boxShadowOffset+"px "+boxShadowOffset+"px "+boxShadowBlur+"px " + boxShadowColor;
		current.BoxShadowSet = "-webkit-box-shadow: " + set + ";";
		current.BoxShadowSet += "\r\n-moz-box-shadow: " + set + ";";
		current.BoxShadowSet += "\r\nbox-shadow: " + set;
		current.BoxShadowBlur = boxShadowBlur;
		current.BoxShadowColor = boxShadowColor;
	}
	else {
		set = "";
		current.BoxShadowSet = "";
	}
	current.BoxShadowOffset = boxShadowOffset;
	current.Element.style.WebkitBoxShadow = set;
	current.Element.style.MozBoxShadow = set;
	current.Element.style.boxShadow = set;
	OutputSource();
}

function SetBoxShadow() {
	dojo.byId("boxShadowOffsetText").value = current.BoxShadowOffset;
	boxShadowOffsetSlider.attr("value", current.BoxShadowOffset);
	dojo.byId("boxShadowBlurText").value = current.BoxShadowBlur;
	boxShadowBlurSlider.attr("value", current.BoxShadowBlur);
	dojo.byId("boxShadowColorText").value = current.BoxShadowColor;
	boxShadowColorPalette.attr("value", current.BoxShadowColor);
}

function UpdateTextShadow() {
	var set;
	var textShadowOffset = parseInt(dojo.byId("textShadowOffsetText").value);
	var textShadowBlur = parseInt(dojo.byId("textShadowBlurText").value);
	if (textShadowOffset!=0 || textShadowBlur!=0) {
		var textShadowColor = dojo.byId("textShadowColorText").value;
		set = textShadowOffset+"px "+textShadowOffset+"px "+textShadowBlur+"px " + textShadowColor;
		current.TextShadowSet = "text-shadow: " + set;
		current.TextShadowBlur = textShadowBlur;
		current.TextShadowColor = textShadowColor;
	}
	else {
		set = "";
		current.TextShadowSet = "";
	}
	current.TextShadowOffset = textShadowOffset;
	current.Element.style.textShadow = set;
	OutputSource();
}

function SetTextShadow() {
	dojo.byId("textShadowOffsetText").value = current.TextShadowOffset;
	textShadowOffsetSlider.attr("value", current.TextShadowOffset);
	dojo.byId("textShadowBlurText").value = current.TextShadowBlur;
	textShadowBlurSlider.attr("value", current.TextShadowBlur);
	dojo.byId("textShadowColorText").value = current.TextShadowColor;
	textShadowColorPalette.attr("value", current.TextShadowColor);
}

function UpdateTransform() {
	var set = "";
	var transformRotate = dojo.byId("transformRotateText").value;
	if (transformRotate.length > 0 && transformRotate!="0") {
		set = "rotate(" + transformRotate + "deg)";
		current.TransformRotate = transformRotate;
	}
	else {
		current.TransformRotate = 0;
	}
	var transformScale = dojo.byId("transformScaleText").value;
	if (transformScale.length > 0 && transformScale!="1.0") {
		if (set.length > 0)
			set += " ";
		set += "scale(" + parseFloat(transformScale) + ")";
		current.TransformScale = transformScale;
	}
	else {
		current.TransformScale = "1.0";
	}
	var transformSkew = dojo.byId("transformSkewText").value;
	var transformSkewY = dojo.byId("transformSkewYText").value;
	if ((transformSkew.length > 0 && transformSkew!="0") || (transformSkewY.length > 0 && transformSkewY!="0")) {
		if (set.length > 0)
			set += " ";
		if ((transformSkew.length > 0 && transformSkew!="0") && (transformSkewY.length > 0 && transformSkewY!="0")) {
			set += "skew(" + transformSkew + "deg," + transformSkewY + "deg)";
			current.TransformSkew = transformSkew;
			current.TransformSkewY = transformSkewY;
		}
		else if (transformSkew.length > 0 && transformSkew!="0") {
			set += "skew(" + transformSkew + "deg)";
			current.TransformSkew = transformSkew;
			current.TransformSkewY = "0";
		}
		else {
			set += "skewY(" + transformSkewY + "deg)";
			current.TransformSkew = "0";
			current.TransformSkewY = transformSkewY;
		}
	}
	
	current.Element.style.WebkitTransform = set;
	current.Element.style.MozTransform = set;
	current.Element.style.OTransform = set;
	if (set.length > 0) {
		current.TransformSet = "-webkit-transform: " + set + ";\r\n";
		current.TransformSet += "-moz-transform: " + set + ";\r\n";
		current.TransformSet += "-o-transform: " + set;
	}
	else {
		current.TransformSet = "";
	}
	OutputSource();
}

function SetTransform() {
	dojo.byId("transformRotateText").value = current.TransformRotate;
	transformRotateSlider.attr("value", current.TransformRotate);
	dojo.byId("transformScaleText").value = current.TransformScale;
	transformScaleSlider.attr("value", parseFloat(current.TransformScale)*10);
	dojo.byId("transformSkewText").value = current.TransformSkew;
	transformSkewSlider.attr("value", current.TransformSkew);
	dojo.byId("transformSkewYText").value = current.TransformSkewY;
	transformSkewYSlider.attr("value", current.TransformSkewY);
}

function UpdateBorder() {
	var borderWidth = parseInt(dojo.byId("borderWidthText").value);
	var borderColor = dojo.byId("borderColorText").value;
	if (borderWidth!=0 || borderColor.length>0) {
		if (borderColor.length==0) {
			borderColor = "#000000";
			dojo.byId("borderColorText").value = borderColor;
		}
		var set = borderWidth+"px solid "+borderColor;
		current.Element.style.border = set;
		current.BorderSet = "border: " + set;
	}
	else {
		current.Element.style.border = "";
		current.BorderSet = "";
	}
	current.BorderWidth = borderWidth;
	current.BorderColor = borderColor;
	OutputSource();
}

function SetBorder() {
	dojo.byId("borderWidthText").value = current.BorderWidth;
	borderWidthSlider.attr("value", current.BorderWidth);
	dojo.byId("borderColorText").value = current.BorderColor;
	borderColorPalette.attr("value", current.BorderColor);
}

function UpdateBackground() {
	var backgroundColor = dojo.byId("backgroundColorText").value;
	current.Element.style.background = backgroundColor;
	current.BackgroundSet = "background: " + backgroundColor;
	current.BackgroundColor = backgroundColor;
	OutputSource();
}

function SetBackground() {
	dojo.byId("backgroundColorText").value = current.BackgroundColor;
	backgroundColorPalette.attr("value", current.BackgroundColor);
}

function UpdatePadding() {
	var set;
	var padding = parseInt(dojo.byId("paddingText").value);
	if (padding != 0) {
		set = padding + "px";
		current.PaddingSet = "padding: " + set;
	}
	else {
		set = "";
		current.PaddingSet = "";
	}
	current.Padding = padding;
	current.Element.style.padding = set;
	OutputSource();
}

function SetPadding() {
	dojo.byId("paddingText").value = current.Padding;
	paddingSlider.attr("value", current.Padding);
}

function UpdateOpacity() {
	var set;
	var opacity = dojo.byId("opacityText").value;
	if (opacity.length > 0 && opacity != "1.0" && opacity != "1") {
		set = parseFloat(opacity);
		current.OpacitySet = "opacity: " + set;
	}
	else {
		set = "1.0";
		current.OpacitySet = "";
	}
	current.Opacity = set;
	current.Element.style.opacity = set;
	OutputSource();
}

function SetOpacity() {
	dojo.byId("opacityText").value = current.Opacity;
	opacitySlider.attr("value", current.Opacity*10);
}

function UpdateZIndex() {
	var set;
	var zindex = parseInt(dojo.byId("zIndexText").value);
	if (zindex != 0 && !isNaN(zindex)) {
		set = zindex;
		current.ZIndexSet = "z-index: " + set;
	}
	else {
		set = "";
		current.ZIndexSet = "";
	}
	current.ZIndex = set;
	current.Element.style.zIndex = set;
	OutputSource();
}

function SetZIndex() {
	dojo.byId("zIndexText").value = current.ZIndex;
	zIndexSlider.attr("value", current.ZIndex);
}

function UpdateText() {
	var textSize = parseInt(dojo.byId("sizeText").value);
	var textColor = dojo.byId("colorText").value;
	var textAlign = dojo.byId("alignmentList").options[dojo.byId("alignmentList").selectedIndex].value;
	var fontFamily = fontComboBox.attr("value");
	var textBold = dojo.byId("boldText").checked;
	var textItalic = dojo.byId("italicText").checked;
	
	var el = current.Element;
	el.style.fontSize = textSize + "pt";
	el.style.color = textColor;
	el.style.textAlign = textAlign.toLowerCase();
	if (fontFamily.length > 0)
		el.style.fontFamily = fontFamily;
	el.style.fontWeight = textBold ? "bold":"";
	el.style.fontStyle = textItalic ? "italic":"";
	
	var set = "";
	if (fontFamily.length > 0)
		set += "font-family: " + fontFamily + ";\r\n";
	if (textBold)
		set += "font-weight: bold;\r\n";
	if (textItalic)
		set += "font-style: italic;\r\n";
	set += "font-size: " + textSize + "pt;\r\n";
	set += "color: " + textColor + ";\r\n";
	set += "text-align: " + textAlign.toLowerCase();
	current.TextSet = set;
	current.TextSize = textSize;
	current.TextFont = fontFamily;
	current.TextBold = textBold;
	current.TextItalic = textItalic;
	current.TextColor = textColor;
	current.TextAlignment = textAlign;
	
	OutputSource();
}

function SetText() {
	textSizeSlider.attr("value", current.TextSize);
	fontComboBox.attr("value", current.TextFont);
	dojo.byId("boldText").checked = current.TextBold;
	dojo.byId("italicText").checked = current.TextItalic;
	dojo.byId("colorText").value = current.TextColor;
	var el = dojo.byId("alignmentList");
	for (var optionIndex = 0; optionIndex < el.options.length && el.options[optionIndex].text!=current.TextAlignment; optionIndex++) ;
	if (optionIndex < el.options.length)
		el.selectedIndex = optionIndex;
}

function UpdateContent() {
	current.Content = dojo.byId("contentText").value;
	current.Element.firstChild.nodeValue = dojo.byId("contentText").value;
}

function SetContent() {
	dojo.byId("contentText").value = current.Content;
}

function AddBox() {
	current = new Box();
	allBoxes.push(current);
	
	UpdatePreview();
	RefreshButtons();
}

function UpdatePreview() {
	UpdateBorderRadius();
	UpdateBoxShadow();
	UpdateTextShadow();
	UpdateTransform();
	UpdateBorder();
	UpdateBackground();
	UpdatePadding();
	UpdateOpacity();
	UpdateZIndex();
	UpdateText();
	OutputSource();
}

function DeleteBox() {
	if (allBoxes.length==1)
		return;
	
	current.Element.parentNode.removeChild(current.Element);
	for (var pos = 0; pos < allBoxes.length && allBoxes[pos]!=current; pos++) ;
	allBoxes.splice(pos, 1);
	if (pos == allBoxes.length)
		pos = allBoxes.length - 1;
	current = allBoxes[pos];
	SetControls(current);
	RefreshButtons();
	Flash(current);
}

function SetControls(box) {
	SetBorderRadius(box);
	SetBoxShadow(box);
	SetTextShadow(box);
	SetTransform(box);
	SetBorder(box);
	SetBackground(box);
	SetPadding(box);
	SetOpacity(box);
	SetZIndex(box);
	SetText(box);
	SetContent(box);
	OutputSource();
}

function RefreshButtons() {
	var btn = dojo.byId("deleteButton");
	if (allBoxes.length<=1) {
		btn.disabled = true;
		btn.style.opacity = 0.5;
	}
	else {
		btn.disabled = false;
		btn.style.opacity = 1.0;
	}
}

function Flash(box) {
	var el = box.Element;
	var currentOpacity = parseFloat(box.Opacity);
	runningOpacityAnimation = true;
	if (currentOpacity==1.0) {
		el.style.opacity = 0.5;
		dojo.animateProperty({ node: el, properties: { opacity: 1.0 }, duration: 500, 
			onEnd: function() { runningOpacityAnimation = false; el.style.opacity = null; } }).play();
	}
	else if (currentOpacity < 0.5) {
		el.style.opacity = 1.0;
		dojo.animateProperty({ node: el, properties: { opacity: currentOpacity }, duration: 500, 
			onEnd: function() { runningOpacityAnimation = false; } }).play();
	}
	else {
		el.style.opacity = 0.0;
		dojo.animateProperty({ node: el, properties: { opacity: currentOpacity }, duration: 500, 
			onEnd: function() { runningOpacityAnimation = false; } }).play();
	}
}
</script>
</head>
<body class="tundra">
	<div class="body" id="container" dojoType="dijit.layout.BorderContainer" design="sidebar" style="opacity: 0;">
		<div class="toolbox" id="tools" dojoType="dijit.layout.ContentPane" region="left" splitter="true" style="padding: 0px; border: none;">
			<div id="toolboxContainer" dojoType="dijit.layout.AccordionContainer">
				<div dojoType="dijit.layout.AccordionPane" title="CSS3 Radius and Box Shadow">
					<div class="fieldTitle">Border Radius</div>
					<div class="fieldNumber"><input id="borderRadiusText" name="borderRadiusText" type="text" style="width: 40px;" value="0" /></div>
					<div class="fieldSlider" id="borderRadiusSlider"></div>
					<div class="fieldTitle">Box Shadow Offset</div>
					<div class="fieldNumber"><input id="boxShadowOffsetText" id="boxShadowOffsetText" type="text" style="width: 40px;" value="0" /></div>
					<div class="fieldSlider" id="boxShadowOffsetSlider"></div>
					<div class="fieldTitle">Box Shadow Blur</div>
					<div class="fieldNumber"><input id="boxShadowBlurText" name="boxShadowBlurText" type="text" style="width: 40px;" value="0" /></div>
					<div class="fieldSlider" id="boxShadowBlurSlider"></div>
					<div class="fieldTitle">Box Shadow Color</div>
					<div class="fieldNumber"><input id="boxShadowColorText" name="boxShadowColorText" type="text" style="width: 100px;" value="#000000" /></div>
					<div class="fieldPalette" id="boxShadowColorPalette"></div>
				</div>
				<div dojoType="dijit.layout.AccordionPane" title="CSS3 Text Shadow">
					<div class="fieldTitle">Text Shadow Offset</div>
					<div class="fieldNumber"><input id="textShadowOffsetText" id="textShadowOffsetText" type="text" style="width: 40px;" value="0" /></div>
					<div class="fieldSlider" id="textShadowOffsetSlider"></div>
					<div class="fieldTitle">Text Shadow Blur</div>
					<div class="fieldNumber"><input id="textShadowBlurText" name="textShadowBlurText" type="text" style="width: 40px;" value="0" /></div>
					<div class="fieldSlider" id="textShadowBlurSlider"></div>
					<div class="fieldTitle">Text Shadow Color</div>
					<div class="fieldNumber"><input id="textShadowColorText" name="textShadowColorText" type="text" style="width: 100px;" value="#000000" /></div>
					<div class="fieldPalette" id="textShadowColorPalette"></div>
				</div>
				<div dojoType="dijit.layout.AccordionPane" title="CSS3 Transforms">
					<div class="fieldTitle">Rotate</div>
					<div class="fieldNumber"><input id="transformRotateText" name="transformRotateText" type="text" style="width: 40px;" value="0" /></div>
					<div class="fieldSlider" id="transformRotateSlider"></div>
					<div class="fieldTitle">Scale</div>
					<div class="fieldNumber"><input id="transformScaleText" name="transformScaleText" type="text" style="width: 40px;" value="1.0" /></div>
					<div class="fieldSlider" id="transformScaleSlider"></div>
					<div class="fieldTitle">Skew X/Horizontal</div>
					<div class="fieldNumber"><input id="transformSkewText" name="transformSkewText" type="text" style="width: 40px;" value="0" /></div>
					<div class="fieldSlider" id="transformSkewSlider"></div>
					<div class="fieldTitle">Skew Y/Vertical</div>
					<div class="fieldNumber"><input id="transformSkewYText" name="transformSkewYText" type="text" style="width: 40px;" value="0" /></div>
					<div class="fieldSlider" id="transformSkewYSlider"></div>
				</div>
				<div dojoType="dijit.layout.AccordionPane" title="Border and Background">
					<div class="fieldTitle">Border Width</div>
					<div class="fieldNumber"><input id="borderWidthText" name="borderWidthText" type="text" style="width: 40px;" value="0" /></div>
					<div class="fieldSlider" id="borderWidthSlider"></div>
					<div class="fieldTitle">Border Color</div>
					<div class="fieldNumber"><input id="borderColorText" name="borderColorText" type="text" style="width: 100px;" value="" /></div>
					<div class="fieldPalette" id="borderColorPalette"></div>
					<div class="fieldTitle">Background Color</div>
					<div class="fieldNumber"><input id="backgroundColorText" name="backgroundColorText" type="text" style="width: 100px;" value="#DDDDDD" /></div>
					<div class="fieldPalette" id="backgroundColorPalette"></div>
					<div class="fieldTitle">Padding</div>
					<div class="fieldNumber"><input id="paddingText" name="paddingText" type="text" style="width: 40px;" value="10" /></div>
					<div class="fieldSlider" id="paddingSlider"></div>
					<div class="fieldTitle">Opacity (0.0 = fully transparent)</div>
					<div class="fieldNumber"><input id="opacityText" name="opacityText" type="text" style="width: 40px;" value="1.0" /></div>
					<div class="fieldSlider" id="opacitySlider"></div>
					<div class="fieldTitle">Z-index</div>
					<div class="fieldNumber"><input id="zIndexText" name="zIndexText" type="text" style="width: 40px;" value="0" /></div>
					<div class="fieldSlider" id="zIndexSlider"></div>
				</div>
				<div dojoType="dijit.layout.AccordionPane" title="Content and Text">
					<div class="fieldTitle">Content</div>
					<div><textarea id="contentText" name="contentText" style="width: 90%; height: 150px;">Drag me around and use the controls to the left to change my appearance. Don't miss the extra panels at the bottom left. Add more of me with + button in upper right corner.</textarea></div>
					<div class="fieldTitle">Text Size</div>
					<div class="fieldNumber"><input id="sizeText" name="sizeText" type="text" style="width: 40px;" value="12" /></div>
					<div class="fieldSlider" id="sizeSlider"></div>
					<div class="fieldTitle">Font</div>
					<!--div class="fieldList"><input id="fontText" name="fontText" type="text" style="width: 90%;" value="" /></div-->
					<div class="fieldList">
						<select id="fontText" name="fontText" style="width: 90%;">
							<option>Verdana, Geneva, sans-serif</option>
							<option>"Gill Sans", "Gill Sans MT", Calibri, sans-serif</option>
							<option>Palatino, "Palatino Linotype", "Palatino LT STD", "Book Antiqua", Georgia, serif</option>
							<option>"Trebuchet MS", "Lucida Grande", "Lucida Sans Unicode", "Lucida Sans", Tahoma, sans-serif</option>
							<option>"Lucida Grande", "Lucida Sans Unicode", "Lucida Sans", Geneva, Verdana, sans-serif</option>
						</select>
					</div>
					<div class="fieldList" style="padding-top: 4px;">
						<input id="boldText" type="checkbox"> <label for="boldText">Bold</label>
						<input id="italicText" type="checkbox"> <label for="italicText">Italic</label>
					</div>
					<div class="fieldTitle">Text Color</div>
					<div class="fieldNumber"><input id="colorText" name="colorText" type="text" style="width: 100px;" value="#888888" /></div>
					<div class="fieldPalette" id="colorPalette"></div>
					<div class="fieldTitle">Alignment</div>
					<div class="fieldList">
						<select id="alignmentList" name="alignmentList" onchange="UpdateText();">
							<option>Left</option>
							<option selected="selected">Center</option>
							<option>Right</option>
							<option>Justify</option>
						</select>
					</div>
				</div>
				<div dojoType="dijit.layout.AccordionPane" title="About">
					<h1>CSS3 Playground</h1>
					<h6>Version 1.2. Made by <a href="http://www.mikeplate.com">Mike Plate</a> <a href="http://twitter.com/mikeplate">@mikeplate</a></h6>
					<h6>User interface made with <a href="http://www.dojotoolkit.org/">Dojo</a></h6>
					<h6>Reference of CSS3 capabilites from <a href="http://www.caniuse.com/">Where can I use</a> and <a href="http://www.quirksmode.org/">QuirksMode</a></h6>
					<h6>Icons from <a href="http://www.fatcow.com/free-icons/index.bml">Farm-Fresh Web Icons</a></h6>
					<h6>Font stacks selected from <a href="http://www.awayback.com/revised-font-stack/">A Way Back</a></h6>
					<h6>Clipboard copying with <a href="http://code.google.com/p/zeroclipboard/">Zero Clipboard</a></h6>
					<h6>No copyright. Use everything in any way you like.</h6>
					<script type="text/javascript">
						var flattr_url = 'http://css3.mikeplate.com';
						var flattr_btn='compact';
						var tweetmeme_style = 'compact';
						var tweetmeme_source = 'mikeplate';
					</script>
					<p class="desc">
						<iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fcss3.mikeplate.com&amp;layout=standard&amp;show_faces=false&amp;width=255&amp;action=like&amp;colorscheme=light&amp;height=35" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:255px; height:32px;" allowTransparency="true"></iframe>
						<br />
						<script src="http://api.flattr.com/button/load.js" type="text/javascript"></script>
						<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
							<input type="hidden" name="cmd" value="_s-xclick">
							<input type="hidden" name="hosted_button_id" value="VXT3AFKCB9VSE">
							<input type="image" src="https://www.paypal.com/en_US/i/btn/btn_donate_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
							<img alt="" border="0" src="https://www.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1">
						</form>
					</p>
					<p class="desc" style="clear: both;">
						Use this web application to experiment and learn about new css3 capabilities. The styles applied when changing the different settings
						should follow the principles of progressive enhancements and will work in all browsers that support the setting.
						Just change the settings and see how the rectangular box changes according to your changes. 
					</p>
					<p class="desc">
						Run the site in different browser to see what the differences are. This site will work in Firefox, Chrome, Opera, Safari and Internet Explorer
						but some properties will not have an effect when changed depending on the browser capabilities. Actually almost everything works in all
						browsers except Internet Explorer 8 and older versions of that browser.
					</p>
					<p class="desc">
						Copy the styles under "Style to use in html/css file" and paste inside your own html or css files to repeat the appearance for your own objects.
						Please give feedback by commenting on the <a href="http://www.mikeplate.com/css3-playground/">blog post</a> about this application.
					</p>
				</div>
			</div>
		</div>
		<div class="canvas" id="content" dojoType="dijit.layout.ContentPane" region="center" style="position: relative;">
			<div id="buttonBar">
				<input type="image" src="add.png" title="Add new preview box" onclick="AddBox();" />
				<input id="deleteButton" type="image" src="delete.png" title="Delete selected preview box" onclick="DeleteBox();" /></a>
			</div>
		</div>
		<div class="text" dojoType="dijit.layout.ContentPane" region="bottom" splitter="true">
			<div style="float: left; width: 50%;">
				<div style="float: right; margin-right: 20px;">
					<input id="CopyToClipboard" type="image" src="copy.png" title="Copy style instructions to clipboard" />
				</div>
				<div class="toolTitle">Style to use in html/css file</div>
				<div class="styleSource" id="htmlSourceSet"></div>
			</div>
			<div style="float: left; width: 50%;">
				<div class="toolTitle" title="Don't use these styles. They are only displayed as an indication of how the current browser interprets the styles.">Style as read from browser<superscript>*</superscript></div>
				<div class="styleSource" id="htmlSource"></div>
			</div>
		</div>
	</div>
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-11107500-2']);
_gaq.push(['_trackPageview']);

(function() {
	var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>	
</body>
</html>
